(this["webpackJsonpsmart-homes-dv-frontend"]=this["webpackJsonpsmart-homes-dv-frontend"]||[]).push([[0],{119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},237:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(13),r=a.n(c),i=(a(119),a(72)),s=(a(120),a(16)),l=a(12),j=(a(121),a(18)),o=a(272),u=a(9),b=a(275),d=a(269),O=a(274),v=a(271),p=a(22),m=a.n(p),f=a(265),h=a(273),x=Object(f.a)((function(e){return Object(h.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),D=function(e,t){for(var a=[],n=m()(e),c=m()(t);n<=c;)a.push(m()(n).format("YYYY-MM-DD")),n=m()(n).add(1,"days");return a},g=a(3),S=function(e){var t=e.inputs,a=e.setInputs,c=x(),r=Object(n.useState)(Object(j.a)({},t)),i=Object(l.a)(r,2),s=i[0],o=i[1];return Object(g.jsx)("div",{children:Object(g.jsxs)(O.a,{required:!0,className:c.formControl,children:[Object(g.jsx)(b.a,{htmlFor:"date-native-required",children:"Date"}),Object(g.jsxs)(v.a,{native:!0,value:s.date,onChange:function(e){var n=e.target.name;o(Object(j.a)(Object(j.a)({},s),{},Object(u.a)({},n,String(e.target.value)))),a(Object(j.a)(Object(j.a)({},t),{},Object(u.a)({},n,String(e.target.value))))},name:"date",inputProps:{id:"date-native-required"},children:[Object(g.jsx)("option",{value:s.date,children:m()(s.date).format("LL")}),Object(g.jsx)("optgroup",{label:"Available Dates",children:D("2019-04-29","2019-05-06").map((function(e){return Object(g.jsx)("option",{value:e,children:m()(e).format("LL")},e)}))})]}),Object(g.jsx)(d.a,{children:"Required"})]})})},y="/api/reading",N="/api/id",I="/api/serial",_=a(73),A=a.n(_),C=a(102),k=function(e,t){var a=Object(n.useState)(null),c=Object(l.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)(!0),j=Object(l.a)(s,2),o=j[0],u=j[1];return Object(n.useEffect)((function(){Object(C.a)(A.a.mark((function a(){var n,c;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch(e);case 3:return n=a.sent,a.next=6,n.json();case 6:c=a.sent,t(c),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),i(a.t0);case 13:return a.prev=13,u(!1),a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[0,10,13,16]])})))()}),[e,t]),{loading:o,error:r}},L=function(e){var t=e.type,a=e.inputs,c=e.setInputs,r=x(),i=Object(n.useState)({label:"Device_ID"===t?"ID":"SN",value:"",title:"Device_ID"===t?"Device ID":"Serial Number"}),s=Object(l.a)(i,2),o=s[0],p=s[1],m=Object(n.useState)(null),f=Object(l.a)(m,2),h=f[0],D=f[1],S=k(function(e){return""+("Device_ID"===e?N:I)}(t),D),y=S.loading,_=S.error;return Object(g.jsx)("div",{children:Object(g.jsxs)(O.a,{className:r.formControl,children:[Object(g.jsx)(b.a,{htmlFor:"".concat(t,"-native-required"),children:o.label}),Object(g.jsxs)(v.a,{native:!0,value:o.value,onChange:function(e){var t,n=e.target.name;p(Object(j.a)(Object(j.a)({},o),{},(t={},Object(u.a)(t,n,String(e.target.value)),Object(u.a)(t,"value",String(e.target.value)),t))),c(Object(j.a)(Object(j.a)({},a),{},Object(u.a)({},n,String(e.target.value))))},name:t,inputProps:{id:"".concat(t,"-native-required")},children:[Object(g.jsx)("option",{value:"Any",children:"Any"}),Object(g.jsx)("optgroup",{label:"".concat(o.title,"s"),children:y||!h||_?null:null===h||void 0===h?void 0:h.results.map((function(e){var a="Device_ID"===t?e.Device_ID:e.Serial_Number;return Object(g.jsx)("option",{value:a,children:a},a)}))})]}),Object(g.jsx)(d.a,{children:t})]})})},E=function(e){var t=e.data,a=e.setData,c=Object(n.useState)(Object(j.a)({},t)),r=Object(l.a)(c,2),i=r[0],s=r[1];return Object(g.jsxs)("div",{className:"filtercontainer",children:[Object(g.jsxs)("div",{className:"filterselects",children:[Object(g.jsx)("div",{className:"filterinner",children:Object(g.jsx)(S,{inputs:i,setInputs:s})}),Object(g.jsxs)("div",{className:"filterinner",children:[Object(g.jsx)(L,{type:"Serial_Number",inputs:i,setInputs:s}),Object(g.jsx)(L,{type:"Device_ID",inputs:i,setInputs:s})]})]}),Object(g.jsx)(o.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),a(Object(j.a)({},i))},children:"Show Results"})]})},q=a(105),w=function(e){var t=e.dataPoints,a=[],n=[];t.forEach((function(e){var t=Object.values(e);a.push(m()(t[0]).add(6,"hours").format("LT")),n.push(t[1])})),console.log(t);var c={labels:a,datasets:[{label:"Wattage",data:n,fill:!1,backgroundColor:"#17173A",borderColor:"#17173A",pointBackgroundColor:"#17173A"}]};return Object(g.jsx)(q.a,{type:"line",data:c,options:{responsive:!0,scales:{y:{ticks:{display:!0},beginAtZero:!0,title:{text:"Watts",display:!0}},x:{ticks:{display:!0},title:{text:"Time",display:!0}}},maintainAspectRatio:!1,elements:{point:{radius:1}}}})},P=a(270),T=Object(f.a)((function(e){return Object(h.a)({root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}})})),W=function(){var e=T();return Object(g.jsx)("div",{className:e.root,children:Object(g.jsx)(P.a,{})})},Y=function(e){var t=e.data,a=Object(n.useState)(null),c=Object(l.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)(!0),j=Object(l.a)(s,2),o=j[0],u=j[1],b=Object(n.useState)([]),d=Object(l.a)(b,2),O=d[0],v=d[1];Object(n.useEffect)((function(){u(!0)}),[t]),Object(n.useEffect)((function(){r&&o&&(u(!1),v(function(e){return e.results.map((function(e){return{x:e.DateTime,y:e.Wattage}}))}(r)))}),[r]);var p="".concat(""+y,"?day=").concat(t.date);"Any"!==t.Serial_Number&&(p+="&sn=".concat(t.Serial_Number)),"Any"!==t.Device_ID&&(p+="&id=".concat(t.Device_ID));var f=k(p,i).error;return Object(g.jsxs)("div",{children:[Object(g.jsxs)("h3",{className:"centerhead",children:["Electrical Consumption on ","".concat(m()(t.date).format("LL")),Object(g.jsx)("br",{}),Object(g.jsxs)("em",{children:["Any"!==t.Serial_Number?"Serial Number: ".concat(t.Serial_Number):"Serial Number: Any",Object(g.jsx)("br",{}),"Any"!==t.Device_ID?"Device ID: ".concat(t.Device_ID):"Device ID: Any",Object(g.jsx)("br",{})]})]}),Object(g.jsx)("div",{className:"graphcontainer",children:o||f?Object(g.jsx)(W,{}):Object(g.jsx)(w,{dataPoints:O})})]})},F=function(){var e=Object(n.useState)({date:"2019-04-29",Device_ID:"Any",Serial_Number:"Any"}),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(g.jsxs)("div",{className:"appcontainer",children:[Object(g.jsx)("h1",{className:"centerhead",children:"Smart Homes Data Visualization"}),Object(g.jsx)("h4",{className:"centerhead",children:"Filter"}),Object(g.jsx)(E,{data:a,setData:c}),Object(g.jsx)(Y,{data:a})]})},R=function(){return Object(g.jsx)(s.c,{children:Object(g.jsx)(s.a,{exact:!0,path:"/",component:F})})};r.a.render(Object(g.jsx)(i.a,{children:Object(g.jsx)(R,{})}),document.getElementById("root"))}},[[237,1,2]]]);
//# sourceMappingURL=main.fa6e1604.chunk.js.map